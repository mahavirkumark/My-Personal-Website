<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Credential Manager</title>
  <script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

 <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body class="bg-gray-100 text-gray-700">
<!-- Font Awesome 6 Free CDN (CSS Only) -->

  <!-- Navbar -->
  <nav class="bg-white shadow p-4 flex justify-between items-center">
    <div class="text-2xl font-bold text-blue-400">My Personal Website</div>

    <div class="flex space-x-6 text-gray-700 text-lg">
      <a href="home.html" class="hover:text-blue-500 transition duration-300 flex items-center gap-1">
        <i class="fas fa-house"></i> Home
      </a>
      <a href="password.html" class="hover:text-blue-500 transition duration-300 flex items-center gap-1">
        <i class="fas fa-key"></i> Passwords
      </a>
      <a href="income.html" class="hover:text-blue-500 transition duration-300 flex items-center gap-1">
        <i class="fas fa-wallet"></i> Income
      </a>
      <a href="links.html" class="hover:text-blue-500 transition duration-300 flex items-center gap-1">
        <i class="fas fa-link"></i> Links
      </a>
      <a href="calender.html" class="hover:text-blue-500 transition duration-300 flex items-center gap-1">
        <i class="fas fa-calendar-alt"></i> Calendar
      </a>
    </div>

    <!-- Profile + Logout -->
    <div class="flex items-center space-x-3">
      <div class="text-right">
        <p id="user-name" class="font-medium text-black text-sm">User Name</p>
        <p id="user-email" class="text-xs text-gray-600">user@example.com</p>
        <p id="user-id" class="text-xs text-gray-400 hidden">UID here</p>
      </div>
      <img id="user-pic" src="" alt="User Photo" width="40" style="border-radius: 50%;" />
      <button id="logout-btn" style="background-color: #dc2626; color: white; padding: 8px 16px; border-radius: 6px; border: none; cursor: pointer;">
        Logout
      </button>
    </div>
  </nav>

  <!-- Content Layout -->
  <div class="max-w-6xl mx-auto mt-10 grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Add Credential Form -->
    <div class="bg-white rounded shadow p-6">
      <h2 class="text-xl font-semibold mb-4">Add New Credential</h2>
      <input id="title" class="border p-2 w-full mb-2" placeholder="App / Website Name (Required)" />
      <input id="email" class="border p-2 w-full mb-2" placeholder="Email (Optional)" />
      <input id="username" class="border p-2 w-full mb-2" placeholder="Username (Optional)" />
      <input id="password" class="border p-2 w-full mb-4" placeholder="Password (Optional)" />
      <button onclick="addCredential()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Save Credential</button>
    </div>

    <!-- Credential Display -->
    <div class="bg-white rounded shadow p-6">
      <h2 class="text-xl font-semibold mb-4">Saved Credentials</h2>
      <ul id="cred-list" class="space-y-4"></ul>
    </div>
  </div>

  <!-- Footer -->
  <footer class="mt-10 bg-white text-gray-600 text-center p-4 border-t">
    &copy; 2025 Personal Website | All rights reserved
  </footer>
  <script>
    // âœ… Your Firebase Config
    const firebaseConfig = {
    apiKey: "AIzaSyB78RTVCg0cmSPp7A1RJyyAgBuCeolO0cc",
    authDomain: "sk12-58e9e.firebaseapp.com",
    databaseURL: "https://sk12-58e9e-default-rtdb.firebaseio.com",
    projectId: "sk12-58e9e",
    storageBucket: "sk12-58e9e.appspot.com",
    messagingSenderId: "470207874652",
    appId: "1:470207874652:web:67ba1cf3629b7e5b144899"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    let currentUser = null;

    // ðŸ” Login
    function login() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider).then(res => {
        currentUser = res.user;
        document.getElementById("login-section").style.display = "none";
        document.getElementById("app-section").style.display = "block";
        document.getElementById("user-info").style.display = "flex";
        document.getElementById("user-name").innerText = currentUser.displayName;
        document.getElementById("user-pic").src = currentUser.photoURL;
        loadCredentials();
      });
    }

    // ðŸ”“ Logout
    function logout() {
      auth.signOut().then(() => location.reload());
    }

    // âœ… Save Credential
    function saveCredential() {
      const title = document.getElementById("title").value;
      const email = document.getElementById("email").value;
      const username = document.getElementById("username").value;
      const password = document.getElementById("password").value;

      if (!title) return alert("Title is required");

      const id = Date.now().toString();
      db.ref("users/" + currentUser.uid + "/credentials/" + id).set({ title, email, username, password });

      document.getElementById("title").value = "";
      document.getElementById("email").value = "";
      document.getElementById("username").value = "";
      document.getElementById("password").value = "";
    }

    // ðŸ”„ Load Credentials
    function loadCredentials() {
      const list = document.getElementById("cred-list");
      list.innerHTML = "";

      db.ref("users/" + currentUser.uid + "/credentials").on("value", (snapshot) => {
        list.innerHTML = "";
        snapshot.forEach(child => {
          const data = child.val();
          const id = child.key;

          const li = document.createElement("li");
          li.className = "border p-3 rounded bg-gray-50 flex justify-between items-start";

          const info = document.createElement("div");
          info.innerHTML = `<p class="font-bold text-lg">${data.title}</p>`;
          if (data.email) info.innerHTML += `<p><strong>Email:</strong> ${data.email}</p>`;
          if (data.username) info.innerHTML += `<p><strong>Username:</strong> ${data.username}</p>`;
          if (data.password) info.innerHTML += `<p><strong>Password:</strong> ${data.password}</p>`;

          const actions = document.createElement("div");
          actions.className = "space-x-2 mt-2";
          actions.innerHTML = `
            <button onclick="editCredential('${id}', ${JSON.stringify(data).replace(/"/g, '&quot;')})" class="text-blue-600">Edit</button>
            <button onclick="deleteCredential('${id}')" class="text-red-600">Delete</button>
          `;

          li.appendChild(info);
          li.appendChild(actions);
          list.appendChild(li);
        });
      });
    }

    // âœï¸ Edit Credential
    function editCredential(id, data) {
      const newTitle = prompt("Edit App/Website Name:", data.title || "");
      const newEmail = prompt("Edit Email:", data.email || "");
      const newUsername = prompt("Edit Username:", data.username || "");
      const newPassword = prompt("Edit Password:", data.password || "");

      if (newTitle) {
        const updated = { title: newTitle };
        if (newEmail) updated.email = newEmail;
        if (newUsername) updated.username = newUsername;
        if (newPassword) updated.password = newPassword;

        db.ref("users/" + currentUser.uid + "/credentials/" + id).set(updated);
      }
    }

    // ðŸ—‘ï¸ Delete Credential
    function deleteCredential(id) {
      if (confirm("Are you sure to delete this credential?")) {
        db.ref("users/" + currentUser.uid + "/credentials/" + id).remove();
      }
    }
    auth.onAuthStateChanged((user) => {
  if (user) {
    currentUser = user;
    document.getElementById("user-name").innerText = user.displayName;
    document.getElementById("user-email").innerText = user.email;
    document.getElementById("user-pic").src = user.photoURL;
    document.getElementById("user-id").innerText = user.uid;
    loadCredentials();
  } else {
    // Redirect to login page or show login UI
    window.location.href = "login.html"; // or show login button if you want
  }
});

  </script>
</body>
</html>
