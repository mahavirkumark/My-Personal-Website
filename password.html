<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Credential Manager</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body class="bg-gray-100 text-gray-700">
<nav class="bg-white shadow p-4 flex justify-between items-center mb-[20px]">
  <!-- Left side: Website title -->
  <div class="container mx-auto flex justify-between items-center">
 <div class="text-xl font-bold text-black-600 flex items-center gap-2">
  <i class="fas fa-user"></i>
  My Personal Website
</div>

  <!-- Middle: Navigation links -->
<div class="flex space-x-12 text-black-700 text-lg">
  <a href="home.html" class="hover:text-blue-500 flex items-center gap-1">
    <i class="fas fa-house"></i> Home
  </a>
  <a href="adress.html" class="hover:text-blue-500 flex items-center gap-1">
    <i class="fas fa-tasks"></i> Address
  </a>
  <a href="password.html" class="hover:text-blue-500 flex items-center gap-1">
    <i class="fas fa-key"></i> Passwords
  </a>
  <a href="income.html" class="hover:text-blue-500 flex items-center gap-1">
    <i class="fas fa-wallet"></i> Income
  </a>
  <a href="links.html" class="hover:text-blue-500 flex items-center gap-1">
    <i class="fas fa-link"></i> Links
  </a>
  <a href="calender.html" class="hover:text-blue-500 flex items-center gap-1">
    <i class="fas fa-calendar-alt"></i> Calendar
  </a>
</div>

  <!-- Right side: User info -->
  <div class="flex items-center space-x-3">
    <div class="text-right">
      <p id="user-name" class="font-medium text-black text-sm">User Name</p>
      <p id="user-email" class="text-xs text-gray-600">user@example.com</p>
      <p id="user-id" class="text-xs text-gray-400 hidden">UID here</p>
    </div>
    <img id="user-pic" src="" alt="User Photo" width="40" class="rounded-full border" />
    <button id="logout-btn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded text-sm">
      Logout
    </button>
  </div>
</nav>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />




<!-- Page Layout -->
<div class="w-full px-6 mx-auto mt-2 grid grid-cols-1 md:grid-cols-3 gap-1 max-w-screen-2xl">
  <!-- Add Credential (1 column) -->
  <div class="bg-white rounded shadow p-4 flex flex-col space-y-2 md:col-span-1">
    <h2 class="text-md font-semibold mb-1 text-center">Add New Credential</h2>

    <input id="title" class="border px-2 py-3 rounded text-xs" placeholder="App / Website Name (Required)" />
    <input id="email" class="border px-2 py-3 rounded text-xs" placeholder="Email (Optional)" />
    <input id="username" class="border px-2 py-3 rounded text-xs" placeholder="Username (Optional)" />
    <input id="password" class="border px-2 py-3 rounded text-xs" placeholder="Password (Optional)" />

    <button onclick="saveCredential()" class="bg-blue-900 text-white text-xs py-3 rounded hover:bg-blue-800 mt-2 flex items-center justify-center">
      <i class="fas fa-save mr-1"></i> Save Credential
    </button>
  </div>




  <!-- Saved Credentials + Search (2 columns) -->
  <div class="bg-white rounded shadow p-6 flex flex-col space-y-4 md:col-span-2">
    <h2 class="text-lg font-semibold text-center">Saved Credentials</h2>

    <!-- Search Bar -->
 <div class="flex justify-center">
  <input
    type="text"
    id="searchInput"
    placeholder="ðŸ” Search your passwords..."
    class="w-full max-w-2xl px-5 py-4 border border-gray-600 rounded-full shadow-sm focus:outline-none focus:ring-5 focus:ring-blue-600 text-[18x] font-bold transition"
    oninput="filterPasswords()"
  />
</div>


    <!-- Grid of Credentials -->
    <div id="cred-list" class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[65vh] overflow-y-auto"></div>
  </div>
</div>








  <!-- Credential List -->
 

<!-- âœ… Footer -->
<footer class="mt-10 bg-white text-gray-600 text-center p-4 border-t">
  &copy; 2025 Personal Website | All rights reserved
</footer>



<script>
  // ================== Firebase Setup ==================
  const firebaseConfig = {
    apiKey: "AIzaSyB78RTVCg0cmSPp7A1RJyyAgBuCeolO0cc",
    authDomain: "sk12-58e9e.firebaseapp.com",
    databaseURL: "https://sk12-58e9e-default-rtdb.firebaseio.com",
    projectId: "sk12-58e9e",
    storageBucket: "sk12-58e9e.appspot.com",
    messagingSenderId: "470207874652",
    appId: "1:470207874652:web:67ba1cf3629b7e5b144899"
  };
  firebase.initializeApp(firebaseConfig);

  const auth = firebase.auth();
  const db = firebase.database();
  let currentUser = null;

  // ================== Save Credential ==================
  function saveCredential() {
    const title = document.getElementById("title").value.trim();
    const email = document.getElementById("email").value.trim();
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    if (!title) {
      alert("App/Website title is required!");
      return;
    }

    const id = Date.now().toString();
    db.ref("users/" + currentUser.uid + "/credentials/" + id).set({ title, email, username, password });

    document.getElementById("title").value = "";
    document.getElementById("email").value = "";
    document.getElementById("username").value = "";
    document.getElementById("password").value = "";
  }

  // ================== Load Credentials ==================
  function loadCredentials() {
    const list = document.getElementById("cred-list");
    list.innerHTML = "<p id='loading-text' class='text-gray-500'>Loading data...</p>";

    db.ref("users/" + currentUser.uid + "/credentials").on("value", (snapshot) => {
      list.innerHTML = "";

      if (!snapshot.exists()) {
        list.innerHTML = "<p class='text-gray-500'>No credentials found.</p>";
        return;
      }

      snapshot.forEach(child => {
        const data = child.val();
        const id = child.key;

        const li = document.createElement("li");
        li.className = "password-item border p-4 rounded bg-gray-50";
        // Inside loadCredentials()
li.innerHTML = `
 ${data.title ? `<p class="website-name text-xl font-semibold text-gray-600" style="line-height:2.2;">${data.title}</p>` : ""}

  ${data.email ? `<p><strong>Email:</strong> ${data.email}
    <button class="copy-btn" data-copy="${encodeURIComponent(data.email)}" onclick="copyToClipboard(this)">
      <i class="fas fa-copy"></i> Copy
    </button></p>` : ""}

  ${data.username ? `<p><strong>Username:</strong> ${data.username}
    <button class="copy-btn" data-copy="${encodeURIComponent(data.username)}" onclick="copyToClipboard(this)">
      <i class="fas fa-copy"></i> Copy
    </button></p>` : ""}

  ${data.password ? `<p><strong>Password:</strong> ${data.password}
    <button class="copy-btn" data-copy="${encodeURIComponent(data.password)}" onclick="copyToClipboard(this)">
      <i class="fas fa-copy"></i> Copy
    </button></p>` : ""}

  <div class="mt-3 flex gap-3">
    <button onclick="editCredential('${id}', ${JSON.stringify(data).replace(/"/g, '&quot;')})" class="text-blue-600 hover:underline">
      <i class="fas fa-edit mr-1"></i>Edit
    </button>
    <button onclick="deleteCredential('${id}')" class="text-red-600 hover:underline">
      <i class="fas fa-trash mr-1"></i>Delete
    </button>
  </div>
`;

        list.appendChild(li);
      });

      filterPasswords();
    });
  }

  // ================== Edit / Delete ==================
  function editCredential(id, data) {
    const newTitle = prompt("Edit Title:", data.title || "");
    const newEmail = prompt("Edit Email:", data.email || "");
    const newUsername = prompt("Edit Username:", data.username || "");
    const newPassword = prompt("Edit Password:", data.password || "");

    if (newTitle !== null) {
      db.ref("users/" + currentUser.uid + "/credentials/" + id).set({
        title: newTitle,
        email: newEmail || "",
        username: newUsername || "",
        password: newPassword || ""
      });
    }
  }

  function deleteCredential(id) {
    if (confirm("Are you sure you want to delete this credential?")) {
      db.ref("users/" + currentUser.uid + "/credentials/" + id).remove();
    }
  }

  // ================== Copy to Clipboard with Badge ==================
  function copyToClipboard(buttonEl) {
    const encoded = buttonEl.getAttribute("data-copy") || "";
    const text = decodeURIComponent(encoded);

    if (!text) return;

    navigator.clipboard.writeText(text).then(() => {
      const badge = document.createElement("span");
      badge.className = "copied-badge";
      badge.textContent = "Copied";

      buttonEl.parentNode.insertBefore(badge, buttonEl.nextSibling);

      requestAnimationFrame(() => {
        badge.classList.add("visible");
      });

      setTimeout(() => {
        badge.classList.remove("visible");
        setTimeout(() => badge.remove(), 180);
      }, 1600);
    }).catch(err => {
      console.error("Copy failed:", err);
    });
  }

  // ================== Filter ==================
  function filterPasswords() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    const items = document.querySelectorAll(".password-item");

    items.forEach(item => {
      const text = item.textContent.toLowerCase();
      item.style.display = text.includes(query) ? "block" : "none";
    });
  }

  // ================== Events ==================
  document.getElementById("logout-btn").addEventListener("click", () => {
    auth.signOut().then(() => location.href = "index.html");
  });

  document.getElementById("searchInput").addEventListener("input", filterPasswords);

  auth.onAuthStateChanged(user => {
    if (user) {
      currentUser = user;
      document.getElementById("user-name").innerText = user.displayName || "User";
      document.getElementById("user-email").innerText = user.email || "";
      document.getElementById("user-id").innerText = user.uid;
      document.getElementById("user-pic").src = user.photoURL || "https://via.placeholder.com/40";
      loadCredentials();
    } else {
      location.href = "index.html";
    }
  });
</script>

<!-- ================== Styles ================== -->
<style>
  .copy-btn {
    border: 1px solid rgba(15,23,42,0.08);
    background: white;
    padding: 6px 10px;
    border-radius: 8px;
    font-size: 13px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.04);
  }
  .copy-btn i { font-size: 12px; }
  .copied-badge {
    display: inline-block;
    margin-left: 8px;
    padding: 4px 8px;
    border-radius: 9999px;
    font-size: 12px;
    line-height: 1;
    background: #10B981;
    color: white;
    box-shadow: 0 4px 10px rgba(16,185,129,0.12);
    opacity: 0;
    transform: translateY(-6px);
    transition: opacity .18s ease, transform .18s ease;
    pointer-events: none;
  }
  .copied-badge.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>





</body>
</html>




