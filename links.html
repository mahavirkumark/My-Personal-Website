<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Link Manager</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  .copied-badge { opacity: 0; transition: all 0.3s ease; margin-left: 0.5rem; font-size: 0.8rem; color: green; font-weight: bold; }
  .copied-badge.visible { opacity: 1; }
</style>
</head>
<body class="bg-gray-50 min-h-screen relative">

<!-- Loading overlay -->


<!-- Navbar Desktop -->
<nav class="hidden lg:flex bg-white shadow px-6 py-4 justify-between items-center">
  <div class="text-2xl font-bold flex items-center gap-2">
    <i class="fas fa-user"></i> My Personal Website
  </div>
  <div class="flex space-x-8 text-gray-900 text-lg">
    <a href="home.html" class="hover:text-blue-500 flex items-center gap-2"><i class="fas fa-house"></i> Home</a>
    <a href="adress.html" class="hover:text-blue-500 flex items-center gap-2"><i class="fas fa-tasks"></i> Address</a>
    <a href="password.html" class="hover:text-blue-500 flex items-center gap-2"><i class="fas fa-key"></i> Passwords</a>
    <a href="income.html" class="hover:text-blue-500 flex items-center gap-2"><i class="fas fa-wallet"></i> Income</a>
    <a href="links.html" class="hover:text-blue-500 flex items-center gap-2"><i class="fas fa-link"></i> Links</a>
    <a href="calender.html" class="hover:text-blue-500 flex items-center gap-2"><i class="fas fa-calendar-alt"></i> Calendar</a>
  </div>
  <div class="flex items-center space-x-3">
    <div class="text-right">
      <p id="userName" class="font-medium text-black text-sm">User Name</p>
      <p id="userEmail" class="text-sm text-gray-600 break-all">user@example.com</p>
      <p id="userId" class="text-xs text-gray-400 hidden">UID</p>
    </div>
    <img id="userPic" class="rounded-full w-10" />
    <button id="logoutBtn" class="bg-red-600 text-white px-3 py-1 rounded text-sm">Logout</button>
  </div>
</nav>
<!-- Navbar Mobile -->
<!-- Navbar Mobile -->
<nav class="lg:hidden bg-white shadow px-6 py-6 flex justify-between items-center text-2xl">
  <div class="text-3xl font-bold flex items-center gap-5">
    <i class="fas fa-user"></i> My Website
  </div>
  <button id="menu-btn" class="text-4xl"><i class="fas fa-bars"></i></button>
</nav>

<!-- Mobile Menu -->
<div id="mobile-menu" class="hidden lg:hidden bg-white shadow px-6 py-6 flex flex-col space-y-5 text-2xl">
  <a href="home.html" class="hover:text-blue-500 flex items-center gap-5 py-4"><i class="fas fa-house"></i> Home</a>
  <a href="adress.html" class="hover:text-blue-500 flex items-center gap-5 py-4"><i class="fas fa-tasks"></i> Address</a>
  <a href="password.html" class="hover:text-blue-500 flex items-center gap-5 py-4"><i class="fas fa-key"></i> Passwords</a>
  <a href="income.html" class="hover:text-blue-500 flex items-center gap-5 py-4"><i class="fas fa-wallet"></i> Income</a>
  <a href="links.html" class="hover:text-blue-500 flex items-center gap-5 py-4"><i class="fas fa-link"></i> Links</a>
  <a href="calender.html" class="hover:text-blue-500 flex items-center gap-5 py-4"><i class="fas fa-calendar-alt"></i> Calendar</a>

  <!-- Mobile User Info -->
  <div class="flex items-center space-x-5 mt-5">
    <img id="mobileUserPic" class="rounded-full w-16 h-16" />
    <div class="text-left">
      <p id="mobileUserName" class="font-semibold text-black text-2xl">User Name</p>
      <p id="mobileUserEmail" class="text-gray-600 break-words text-lg">user@example.com</p>
    </div>
    <button id="mobileLogout" class="bg-red-600 text-white px-5 py-3 rounded text-lg">Logout</button>
  </div>
</div>

<!-- Main Content for Mobile (Optional Font Increase) -->
<div class="max-w-9xl mx-auto mt-6 p-4 flex flex-col lg:flex-row gap-6 text-base lg:text-base">
  <!-- Add Link Form -->
  <div class="w-full lg:w-5/12 bg-white shadow p-6 rounded text-lg">
    <h2 class="text-2xl font-bold mb-4">Add a Link</h2>
    <input id="linkInput" type="url" placeholder="Enter URL" class="w-full p-4 border rounded mb-3 text-lg"/>
    <textarea id="descInput" rows="3" placeholder="Enter Description" class="w-full p-4 border rounded mb-4 text-lg"></textarea>
    <button id="addLinkBtn" class="bg-blue-600 text-white px-5 py-4 rounded w-full text-lg">Add Link</button>
  </div>

  <!-- Link List -->
  <div class="w-full lg:w-7/12 bg-white shadow p-6 rounded text-lg">
    <h2 class="text-2xl font-bold mb-4">Your Links</h2>
    <div id="linkList" class="space-y-4 overflow-y-auto max-h-[70vh] pr-2"></div>
  </div>
</div>

<script>
const menuBtn = document.getElementById('menu-btn');
const mobileMenu = document.getElementById('mobile-menu');
menuBtn.addEventListener('click', ()=> mobileMenu.classList.toggle('hidden'));

const firebaseConfig = {
  apiKey: "AIzaSyB78RTVCg0cmSPp7A1RJyyAgBuCeolO0cc",
  authDomain: "sk12-58e9e.firebaseapp.com",
  databaseURL: "https://sk12-58e9e-default-rtdb.firebaseio.com",
  projectId: "sk12-58e9e",
  storageBucket: "sk12-58e9e.appspot.com",
  messagingSenderId: "470207874652",
  appId: "1:470207874652:web:67ba1cf3629b7e5b144899"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

const userName = document.getElementById("userName");
const userEmail = document.getElementById("userEmail");
const userPic = document.getElementById("userPic");
const logoutBtn = document.getElementById("logoutBtn");

const mobileUserName = document.getElementById("mobileUserName");
const mobileUserEmail = document.getElementById("mobileUserEmail");
const mobileUserPic = document.getElementById("mobileUserPic");
const mobileLogout = document.getElementById("mobileLogout");

const linkInput = document.getElementById("linkInput");
const descInput = document.getElementById("descInput");
const addLinkBtn = document.getElementById("addLinkBtn");
const linkList = document.getElementById("linkList");
const searchInput = document.getElementById("searchInput");
const loadingOverlay = document.getElementById("loadingOverlay");

let currentUserId = "";
let allLinks = [];
let userLoaded = false;
let linksLoaded = false;

// Function to hide overlay if both user and links loaded
function checkLoadingComplete() {
  if (userLoaded && linksLoaded) {
    loadingOverlay.style.display = "none";
  }
}

// Auth state
auth.onAuthStateChanged(user => {
  if (user) {
    currentUserId = user.uid;

    // Set user info
    userName.textContent = user.displayName || "No Name";
    userEmail.textContent = user.email; // full email
    userPic.src = user.photoURL || "";

    mobileUserName.textContent = user.displayName || "No Name";
    mobileUserEmail.textContent = user.email; // full email
    mobileUserPic.src = user.photoURL || "";

    userLoaded = true;
    checkLoadingComplete();

    // Load links
    loadLinks();
  } else {
    window.location.href = "index.html";
  }
});

// Add link
addLinkBtn.addEventListener("click", ()=>{
  const link = linkInput.value.trim();
  const desc = descInput.value.trim();
  if(!link || !desc){ alert("Please enter both link and description."); return; }
  const newRef = db.ref(`users/${currentUserId}/links`).push();
  newRef.set({link, desc});
  linkInput.value = "";
  descInput.value = "";
});

// Load links
function loadLinks(){
  db.ref(`users/${currentUserId}/links`).on("value", snapshot => {
    allLinks = [];
    snapshot.forEach(child => {
      allLinks.push({id: child.key, ...child.val()});
    });
    renderLinks(allLinks);
    linksLoaded = true;
    checkLoadingComplete();
  });
}

// Render links
function renderLinks(links){
  linkList.innerHTML = "";
  if(links.length === 0){ 
    linkList.innerHTML = "<p class='text-gray-500'>No links found.</p>"; 
    return; 
  }
  links.forEach(item => {
    const div = document.createElement("div");
    div.className = "border p-3 rounded flex justify-between items-center hover:bg-gray-50 transition text-base";
    div.innerHTML = `
      <div>
        <span class="text-blue-600 underline cursor-pointer inline-block" onclick="window.open('${item.link}','_blank')">${item.link}</span>
        <button class="copy-btn ml-2" data-copy="${encodeURIComponent(item.link)}"><i class="fas fa-copy"></i> Copy</button>
        <p class="text-sm text-gray-600 mt-1">${item.desc}</p>
      </div>
      <div class="flex gap-2">
        <button onclick="editLink('${item.id}','${item.link}','${item.desc}')" class="bg-yellow-500 hover:bg-yellow-600 transition text-white px-2 py-1 rounded"><i class="fas fa-edit"></i></button>
        <button onclick="deleteLink('${item.id}')" class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 transition text-white px-3 py-1 rounded flex items-center gap-1"><i class="fas fa-trash-alt"></i> Delete</button>
      </div>
    `;
    linkList.appendChild(div);
  });

  // Copy buttons
  const copyBtns = linkList.querySelectorAll(".copy-btn");
  copyBtns.forEach(btn => btn.addEventListener("click", ()=>{
    const text = decodeURIComponent(btn.getAttribute("data-copy")||"");
    navigator.clipboard.writeText(text).then(()=>{
      const badge = document.createElement("span");
      badge.className="copied-badge"; badge.textContent="Copied";
      btn.parentNode.insertBefore(badge, btn.nextSibling);
      requestAnimationFrame(()=> badge.classList.add("visible"));
      setTimeout(()=>{ badge.classList.remove("visible"); setTimeout(()=> badge.remove(),180); },1600);
    });
  }));
}

// Edit link
function editLink(id, oldLink, oldDesc){
  const newDesc = prompt("Edit description:", oldDesc);
  if(newDesc !== null && newDesc.trim() !== ""){
    db.ref(`users/${currentUserId}/links/${id}`).update({desc: newDesc});
  }
}

// Delete link
function deleteLink(id){
  if(confirm("Are you sure you want to delete this link?")){
    db.ref(`users/${currentUserId}/links/${id}`).remove();
  }
}

// Search
searchInput.addEventListener("input", ()=>{
  const term = searchInput.value.toLowerCase();
  renderLinks(allLinks.filter(l => l.desc.toLowerCase().includes(term)));
});

// Logout
logoutBtn.addEventListener("click", ()=> auth.signOut().then(()=> window.location.href="index.html"));
mobileLogout.addEventListener("click", ()=> auth.signOut().then(()=> window.location.href="index.html"));
</script>




<style>
  .copy-btn {
  border: 1px solid rgba(15,23,42,0.08);
  background: white;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
.copy-btn i { font-size: 12px; }
.copied-badge {
  display: inline-block;
  margin-left: 6px;
  padding: 2px 6px;
  border-radius: 9999px;
  font-size: 12px;
  line-height: 1;
  background: #10B981;
  color: white;
  box-shadow: 0 4px 10px rgba(16,185,129,0.12);
  opacity: 0;
  transform: translateY(-4px);
  transition: opacity .18s ease, transform .18s ease;
  pointer-events: none;
}
.copied-badge.visible {
  opacity: 1;
  transform: translateY(0);
}

</style>
</body>
</html>







