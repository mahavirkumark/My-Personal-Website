<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Personal Website</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script> 
    
    <style>
        /* Reusable Animations */
        .fade-in { opacity: 0; transform: translateY(20px); animation: fadeInUp 0.8s forwards; }
        .slide-left { opacity: 0; transform: translateX(-20px); animation: slideLeft 0.8s forwards; }
        .slide-right { opacity: 0; transform: translateX(20px); animation: slideRight 0.8s forwards; }
        .animate-card { animation: cardPop 0.5s ease-out both; }
        
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
        @keyframes slideLeft { to { opacity: 1; transform: translateX(0); } }
        @keyframes slideRight { to { opacity: 1; transform: translateX(0); } }
        @keyframes cardPop {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Custom Styles for Professional Look */
        nav a { transition: color 0.3s, transform 0.2s ease-out;}
        nav a:hover { color: #1e40af; transform: translateY(-2px); }
        body { min-height: 100vh; display: flex; flex-direction: column; }
        .content-wrapper { flex-grow: 1; }

        /* Mobile Menu correction */
        #mobile-menu {
             position: absolute; top: 4rem; left: 0; width: 100%; z-index: 20;
             transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
             max-height: 0; overflow: hidden; opacity: 0;
             box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); 
        }
        #mobile-menu:not(.hidden) {
            max-height: 80vh; overflow-y: auto; opacity: 1;
        }
        #mobile-menu a, #profile-toggle-btn {
            display: flex; align-items: center; padding: 0.6rem 0.8rem; margin: 0.2rem 0;
            border-radius: 0.375rem; text-align: left; width: 100%;
        }
        #mobile-menu a:hover, #profile-toggle-btn:hover { background-color: #f3f4f6; }
        #mobile-menu a.active { background-color: #eff6ff; color: #1e40af; font-weight: 600; }

        /* --- SIDEBAR STYLES (Desktop) --- */
        .sidebar-desktop {
            width: 320px; flex-shrink: 0; background-color: white; padding: 1.5rem 1rem;
            border-radius: 0.5rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); 
            align-self: flex-start; position: sticky; top: 6rem;
            min-height: calc(100vh - 8rem); 
        }
        .sidebar-nav-internal a {
            display: flex; align-items: center; padding: 0.8rem 0.6rem; margin-bottom: 0.5rem;
            border-radius: 0.5rem; color: #4b5563; text-decoration: none; font-weight: 500;
            font-size: 1.05rem; transition: all 0.2s;
        }
        .sidebar-nav-internal a:hover,
        .sidebar-nav-internal a.active {
            background-color: #eff6ff; color: #1e40af; transform: translateX(3px);
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
        }
        .sidebar-nav-internal i { margin-right: 0.75rem; width: 1.25rem; text-align: center; }
        
        .dashboard-wrapper {
            max-width: 1400px; width: 90%; margin-left: auto; margin-right: auto;
            padding-left: 0; padding-right: 0;
        }
        .dashboard-main-content { flex-grow: 1; }

        /* Profile Panel Styling */
        #mobileProfilePanel {
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            max-height: 0; opacity: 0; overflow: hidden; margin-bottom: 0;
        }
        #mobileProfilePanel.show {
            max-height: 200px; opacity: 1; margin-bottom: 1rem;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-700 font-sans">
<link rel="manifest" href="/manifest.json">
<div class="content-wrapper">

    <div class="hidden md:block fade-in">
        <header class="bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-30 border-b border-gray-200">
            <div class="flex items-center gap-2 slide-left">
                <i class="fas fa-user-circle text-3xl text-blue-800"></i>
                <h1 class="text-2xl font-bold text-gray-900">My Personal Website</h1>
            </div>

            <nav class="flex items-center gap-8 text-lg font-normal text-gray-600 slide-right">
                <a href="home.html" class="flex items-center gap-2 hover:text-blue-700"><i class="fas fa-house"></i> Home</a>
            
                <a href="income.html" class="flex items-center gap-2 hover:text-blue-700"><i class="fas fa-wallet"></i> Income</a>
                <a href="links.html" class="flex items-center gap-2 hover:text-blue-700"><i class="fas fa-link"></i> Links</a>
                <a href="calender.html" class="flex items-center gap-2 hover:text-blue-700"><i class="fas fa-calendar-days"></i> Calendar</a>
                <a href="birthday.html" class="flex items-center gap-2 hover:text-blue-700"><i class="fas fa-cake-candles"></i> Birthday</a>
                <a href="password.html" class="flex items-center gap-2 hover:text-blue-700"><i class="fas fa-lock"></i> Passwords</a>
            </nav>

            <div class="flex items-center gap-4 slide-left">
                <div class="text-right">
                    <p id="desktopUserName" class="font-semibold text-gray-800 text-base">Dashboard User</p>
                    <p id="desktopUserEmail" class="text-sm text-gray-500">user@example.com</p>
                </div>
                <img id="desktopUserPhoto" src="https://ui-avatars.com/api/?name=U&background=3b82f6&color=fff&size=100" alt="User Photo" class="w-12 h-12 rounded-full border border-gray-300"/>
                <button id="desktopLogout" class="bg-red-700 text-white px-4 py-2 rounded-full shadow-md hover:bg-red-800 text-sm transition duration-150">Logout</button>
            </div>
        </header>

        <div class="dashboard-wrapper mt-6 flex gap-6">
            
            <aside class="sidebar-desktop fade-in">
                <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Core Data</h3>
                <nav class="sidebar-nav-internal flex flex-col">
           
                    <a href="profile.html"><i class="fas fa-user-gear"></i> Profile Settings</a>
                    <a href="essential.html""><i class="fas fa-shopping-basket"></i> Daily Essentials</a>
  <a href="asset.html" ><i class="fas fa-dollar-sign mr-3 text-gray-500"></i> Manage Assets</a>
<a href="place.html" ><i class="fas fa-map-marker-alt mr-3 text-gray-500"></i> Tourist Places</a>
                    
                    <h4 class="text-xs font-semibold text-gray-400 mt-6 mb-2">Productivity</h4>
                    <a href="daily.html"><i class="fas fa-list-check"></i> Daily Tasks</a>
                    <a href="principle.html"><i class="fas fa-lightbulb"></i> Principle</a>
                    <a href="contact.html"><i class="fas fa-address-book"></i> Contact</a>
                  
                      <a href="grocery.html"><i class="fas fa-shopping-cart"></i> Grocery List</a>
              <a href="adress.html"><i class="fas fa-map-location-dot"></i> Address </a>

                    <h4 class="text-xs font-semibold text-gray-400 mt-6 mb-2">System</h4>
                   <a href="shop.html"><i class="fas fa-store"></i> Stores</a>
                    <a href="added.html"><i class="fas fa-gear"></i> App Settings</a>
                    <a href="help.html"><i class="fas fa-circle-question"></i> Help & Support</a>
                </nav>
            </aside>
            
            <main class="dashboard-main-content p-8 bg-white rounded shadow fade-in">
                <h2 class="text-4xl font-extrabold text-gray-900 mb-4">Welcome to Your Personal Web Hub üíº</h2>
                
                <p class="text-lg text-gray-600 mb-8 border-b pb-4">
                    This personalized dashboard is designed to be your central command center, helping you organize, manage, and secure all aspects of your digital life and web usage in one private, convenient space.
                </p>

                <h3 class="text-2xl font-bold text-gray-800 mb-6 mt-6 border-b pb-2">Maximize Your Life and Career üöÄ</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    
                    <div class="animate-card p-6 bg-blue-50 border-t-4 border-blue-700 rounded-lg shadow-lg" style="animation-delay: 0.1s;">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-calendar-check text-3xl text-blue-600 mr-3"></i>
                            <h4 class="text-xl font-semibold text-blue-800">Enhance Daily Life</h4>
                        </div>
                        <ul class="space-y-3 text-gray-700">
                            <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i> **Effortless Organization:** Track birthdays, appointments, and personal links in one place, ensuring you never miss an important date or resource.</li>
                            <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i> **Digital Safety:** Securely store all your passwords and sensitive contact information using Firebase authentication, giving you peace of mind.</li>
                            <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-2 mt-1"></i> **Personal Finances:** Log your Income details privately to keep track of your financial goals and status.</li>
                        </ul>
                    </div>

                    <div class="animate-card p-6 bg-green-50 border-t-4 border-green-700 rounded-lg shadow-lg" style="animation-delay: 0.2s;">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-chart-line text-3xl text-green-600 mr-3"></i>
                            <h4 class="text-xl font-semibold text-green-800">Boost Professional Work</h4>
                        </div>
                        <ul class="space-y-3 text-gray-700">
                            <li class="flex items-start"><i class="fas fa-check-circle text-blue-500 mr-2 mt-1"></i> **Focused Productivity:** Use Daily Tasks and Notes tools to manage projects and capture ideas instantly, improving workflow efficiency.</li>
                            <li class="flex items-start"><i class="fas fa-check-circle text-blue-500 mr-2 mt-1"></i> **Data Oversight:** Access Analytics and Security Logs to monitor your account activity, crucial for compliance and security in any professional role.</li>
                            <li class="flex items-start"><i class="fas fa-check-circle text-blue-500 mr-2 mt-1"></i> **Information Retrieval:** Centralize business links and contact details, making it faster to access essential professional resources.</li>
                        </ul>
                    </div>
                </div>

                <h3 class="text-2xl font-bold text-gray-800 mb-4 mt-8">Core Features Overview</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-4 bg-gray-100 border-l-4 border-gray-600 rounded-lg">
                        <p class="font-bold text-gray-800 flex items-center mb-2"><i class="fas fa-key mr-2"></i> Confidential Data Storage</p>
                        <p class="text-sm text-gray-700">Secure vaults for storing Passwords, financial Income, and Contact Details privately.</p>
                    </div>
                    <div class="p-4 bg-yellow-50 border-l-4 border-yellow-700 rounded-lg">
                        <p class="font-bold text-yellow-800 flex items-center mb-2"><i class="fas fa-cogs mr-2"></i> Custom Configuration</p>
                        <p class="text-sm text-gray-700">Personalize your experience and system behavior using the dedicated Profile Settings and App Settings.</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div class="block md:hidden fade-in">
        <header class="bg-white shadow-md sticky top-0 z-30">
            <div class="flex justify-between items-center py-2 px-4">
                <div class="flex items-center gap-2">
                    <i class="fas fa-user-circle text-2xl text-blue-800"></i>
                    <h1 class="text-xl font-bold text-gray-900">My Personal Website</h1>
                </div>
                <button id="menu-btn" class="text-gray-700 hover:text-blue-700 focus:outline-none p-2 rounded-lg">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>

            <nav id="mobile-menu" class="hidden bg-white px-6 pb-6 space-y-1 text-base font-normal text-gray-800">
                
                <h3 class="font-bold text-sm text-gray-700 mb-2 pt-2">MAIN NAVIGATION</h3>
                <a href="home.html"><i class="fas fa-house mr-3"></i> Home</a>
               
                <a href="income.html"><i class="fas fa-wallet mr-3"></i> Income</a>
                <a href="links.html"><i class="fas fa-link mr-3"></i> Links</a>
                <a href="c.html"><i class="fas fa-calendar-days mr-3"></i> Calender</a>
               
                <a href="password.html"><i class="fas fa-lock mr-3"></i> Passwords</a>
                 <button id="profile-toggle-btn" class="flex items-center gap-2 mt-4 w-full text-left font-medium text-gray-800 border-t pt-3 hover:bg-gray-100">
                    <i class="fas fa-user-circle text-2xl"></i>
                    <span class="font-medium">Profile</span>
                    <i class="fas fa-chevron-down ml-auto transition-transform duration-300" id="profileChevron"></i>
                </button>

                <div id="mobileProfilePanel" class="mt-2 p-3 border rounded bg-gray-50 space-y-2">
                    <div class="flex items-center gap-3">
                        <img id="mobileUserPhoto" src="https://ui-avatars.com/api/?name=U&background=3b82f6&color=fff&size=100" alt="User Photo" class="w-10 h-10 rounded-full border border-gray-300"/>
                        <div>
                            <p id="mobileUserName" class="font-bold text-gray-900">Loading...</p>
                            <p id="mobileUserEmail" class="text-xs text-gray-500">Loading...</p>
                        </div>
                    </div>
                    
                    <button onclick="logout()" class="bg-red-700 text-white px-3 py-2 rounded-full hover:bg-red-800 text-sm mt-2 w-full">Logout</button>
                </div>

                <p class="font-bold text-sm text-gray-500 mb-0 pt-4 border-t border-gray-200 px-1">CORE DATA</p>
               
                <a href="profile.html"><i class="fas fa-user-gear mr-3"></i> Profile Settings</a>
                     <a href="essential.html"><i class="fas fa-shopping-basket mr-3"></i> Daily Essential</a>
                <a href="contact.html"><i class="fas fa-address-book mr-3"></i> Contact Details</a>
               <a href="grocery.html"><i class="fas fa-shopping-cart mr-3"></i> Grocery List</a>
                
             <a href="addressmob.html"><i class="fas fa-map-location-dot mr-3"></i> Address </a>
                <a href="asset.html" 
   class="flex items-center p-3 text-base font-medium rounded-lg text-gray-700 hover:bg-gray-100 hover:text-indigo-600 transition duration-150">
    <i class="fas fa-dollar-sign mr-3 text-indigo-500"></i> 
    Manage Assets
</a>

<a href="place.html" 
   class="flex items-center p-3 text-base font-medium rounded-lg text-gray-700 hover:bg-gray-100 hover:text-indigo-600 transition duration-150">
    <i class="fas fa-map-marker-alt mr-3 text-indigo-500"></i> 
    Tourist Places
</a>
                
                <p class="font-bold text-sm text-gray-500 mb-0 pt-4 border-t border-gray-200 px-1">PRODUCTIVITY</p>
                <a href="daily.html"><i class="fas fa-list-check mr-3"></i> Daily Tasks</a>
                <a href="principle.html"><i class="fas fa-lightbulb mr-3"></i> Principle</a>
                

           
<a href="shop.html"><i class="fas fa-store mr-3"></i> Stores</a>
                <a href="added.html"><i class="fas fa-gear mr-3"></i> App Settings</a>
                <a href="help.html"><i class="fas fa-circle-question mr-3"></i> Help & Support</a>

               
                
            </nav>
        </header>

        <main class="w-full p-4 bg-white rounded shadow fade-in">
            <h2 class="text-3xl font-extrabold text-gray-900 mb-4">Your Personal Web Hub üíº</h2>
            
            <p class="text-md text-gray-600 mb-6 border-b pb-3">
                This dashboard is your command center for managing and securing your digital life. Tap the menu ($\equiv$) for all navigation and features.
            </p>

            <h3 class="text-xl font-bold text-gray-800 mb-3 mt-4">Maximize Your Life and Career üöÄ</h3>
            <ul class="space-y-3 mb-6 text-gray-700 list-disc list-inside ml-2 text-sm">
                <li>Centralize birthdays, calendars, and personal links for **effortless organization**.</li>
                <li>Securely store all your **Passwords** and sensitive data with robust **Security Logs**.</li>
                <li>Manage **Daily Tasks** and review **Analytics** to boost your professional productivity and oversight.</li>
            </ul>

            <h3 class="text-xl font-bold text-gray-800 mb-3 mt-4">Core Features</h3>
            <div class="grid grid-cols-1 gap-4">
                <div class="p-3 bg-blue-50 border-l-4 border-blue-700 rounded-lg">
                    <p class="font-bold text-blue-800 flex items-center mb-1 text-sm"><i class="fas fa-key mr-2"></i> Confidential Data Storage</p>
                    <p class="text-xs text-gray-700">Secure vaults for Passwords and financial Income.</p>
                </div>
                <div class="p-3 bg-green-50 border-l-4 border-green-700 rounded-lg">
                    <p class="font-bold text-green-800 flex items-center mb-1 text-sm"><i class="fas fa-tasks mr-2"></i> Workflow Management</p>
                    <p class="text-xs text-gray-700">Tools for managing Daily Tasks and Notes.</p>
                </div>
            </div>
            
        </main>
    </div>

</div> 

<footer class="mt-auto bg-white text-gray-600 text-center p-4 border-t text-sm fade-in border-t border-gray-200 mt-8">
    &copy; 2025 Personal Website | All rights reserved
</footer>

<style>
    /* Desktop Check */
    @media only screen and (min-width: 768px) {
        #universal-bottom-nav, .nav-spacer { display: none !important; }
    }

    :root {
        --nav-bg: #ffffff;
        --nav-text: #000000; /* Made pure black for higher contrast */
        --nav-hover: #007AFF; 
        --nav-height: 65px;
    }

    /* --- INSTANT REDIRECT FIX --- */
    .nav-link {
        /* Set transition to 0s to remove all delay when clicking */
        transition: none !important; 
        -webkit-tap-highlight-color: transparent;
        cursor: pointer;
    }

    /* Remove the movement (translateY/scale) that makes it feel slow */
    .nav-link:hover i, .nav-link:active {
        transform: none !important; 
        color: var(--nav-hover) !important;
    }

    /* Keep icons and text bold and dark */
    .nav-link i { 
        font-size: 18px; 
        display: block; 
        margin-bottom: 3px; 
        font-weight: 900 !important; /* Bolder icons */
    }
    
    .nav-link div { 
        font-size: 10px; 
        font-weight: 800 !important; /* Bolder text */
    }

    /* Optimization for Dark Mode */
    [data-theme="dark"] {
        --nav-bg: #1f2937;
        --nav-text: #ffffff;
    }
</style>

<nav id="universal-bottom-nav" style="position: fixed; bottom: 0; left: 0; width: 100%; height: var(--nav-height); background-color: var(--nav-bg); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #eee; box-shadow: 0 -5px 15px rgba(0,0,0,0.05); z-index: 999999; font-family: sans-serif;">

    <a href="home.html" class="nav-link" style="text-decoration: none; color: var(--nav-text); text-align: center; flex: 1; -webkit-tap-highlight-color: transparent;">
        <i class="fa-solid fa-house" style="font-size: 18px; display: block; margin-bottom: 3px;"></i>
        <div style="font-size: 10px; font-weight: 600;">Home</div>
    </a>

    <a href="adress.html" class="nav-link" style="text-decoration: none; color: var(--nav-text); text-align: center; flex: 1; -webkit-tap-highlight-color: transparent;">
        <i class="fa-solid fa-location-dot" style="font-size: 18px; display: block; margin-bottom: 3px;"></i>
        <div style="font-size: 10px; font-weight: 600;">Address</div>
    </a>

    <a href="password.html" class="nav-link" style="text-decoration: none; color: var(--nav-text); text-align: center; flex: 1; -webkit-tap-highlight-color: transparent;">
        <i class="fa-solid fa-key" style="font-size: 18px; display: block; margin-bottom: 3px;"></i>
        <div style="font-size: 10px; font-weight: 600;">Passwords</div>
    </a>

    <a href="grocery.html" class="nav-link" style="text-decoration: none; color: var(--nav-text); text-align: center; flex: 1; -webkit-tap-highlight-color: transparent;">
        <i class="fa-solid fa-cart-shopping" style="font-size: 18px; display: block; margin-bottom: 3px;"></i>
        <div style="font-size: 10px; font-weight: 600;">Grocery</div>
    </a>

    <a href="contact.html" class="nav-link" style="text-decoration: none; color: var(--nav-text); text-align: center; flex: 1; -webkit-tap-highlight-color: transparent;">
        <i class="fa-solid fa-envelope" style="font-size: 18px; display: block; margin-bottom: 3px;"></i>
        <div style="font-size: 10px; font-weight: 600;">Contact</div>
    </a>

</nav>

<div class="nav-spacer" style="height: 75px; width: 100%;"></div>

<script type="module">
// =================================================================
// 1. CONFIGURATION AND INITIALIZATION
// =================================================================

// --- Firebase Configuration (REPLACE WITH YOUR OWN CONFIG) ---
const firebaseConfig = {
    apiKey: "AIzaSyB78RTVCg0cmSPp7A1RJyyAgBuCeolO0cc",
    authDomain: "sk12-58e9e.firebaseapp.com",
    projectId: "sk12-58e9e",
    storageBucket: "sk12-58e9e.appspot.com",
    messagingSenderId: "470207874652",
    appId: "1:470207874652:web:67ba1cf3629b7e5b144899"
};
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const auth = firebase.auth();
const database = firebase.database(); 

// Global state variables
let currentUserId = null;
let allBirthdays = {}; // Still useful if you display data on the page
let appSchedulerIntervalId = null; // Keeping this for the logout cleanup

// --- REMOVE ALL NOTIFICATION CONSTANTS (Not needed for email) ---

// =================================================================
// 2. üéÇ BIRTHDAY LOGIC (SIMPLIFIED) üéÇ
// =================================================================

// The client-side notification/scheduler functions are now REMOVED
// The server (Cloud Function) handles all scheduling and email sending.

// =================================================================
// 3. APPLICATION LOGIC (Data and UI)
// =================================================================

/**
 * Loads the user's birthday data from Firebase for UI display only.
 */
function loadBirthdayData() {
    if (!currentUserId) return;

    const birthdaysRef = database.ref(`users/${currentUserId}/birthdays`);
    
    // The 'value' listener keeps local data updated but does NOT trigger notifications.
    birthdaysRef.on('value', (snapshot) => {
        allBirthdays = snapshot.val() || {};
        console.log("Birthday data updated from Firebase.");
        
        // You would update your HTML list of birthdays here.
    }, (error) => {
        console.error("Firebase Birthday Read Failed:", error);
    });
}


function updateUI(user) {
    const userName = user.displayName || 'Dashboard User';
    const userEmail = user.email || 'user@example.com';
    let initial = (user.email && user.email.length > 0) ? user.email[0].toUpperCase() : 'U';
    
    const photoPlaceholder = `https://ui-avatars.com/api/?name=${initial}&background=3b82f6&color=fff&size=100`; 
    const userPhoto = user.photoURL || photoPlaceholder; 

    document.querySelectorAll('#desktopUserName, #mobileUserName').forEach(el => el.textContent = userName);
    document.querySelectorAll('#desktopUserEmail, #mobileUserEmail').forEach(el => el.textContent = userEmail);
    document.querySelectorAll('#desktopUserPhoto, #mobileUserPhoto').forEach(el => el.src = userPhoto); 
    
    currentUserId = user.uid;
}

window.logout = function() {
    if(appSchedulerIntervalId) {
        clearInterval(appSchedulerIntervalId);
    }
    auth.signOut().then(() => { 
        // CHANGE THIS LINE:
        window.location.replace('index.html'); 
    }).catch(error => { 
        console.error('Sign out failed:', error);
        alert('Sign out failed: ' + error.message); 
    });
}

// --- DOM ELEMENTS & EVENT LISTENERS (Kept as is for compatibility) ---
const menuBtn = document.getElementById('menu-btn');
const mobileMenu = document.getElementById('mobile-menu');
const profileToggleBtn = document.getElementById('profile-toggle-btn');
const mobileProfilePanel = document.getElementById('mobileProfilePanel');
const profileChevron = document.getElementById('profileChevron');
const desktopLogoutBtn = document.getElementById('desktopLogout');

if (menuBtn && mobileMenu) {
    menuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });
}
if (profileToggleBtn && mobileProfilePanel && profileChevron) {
    profileToggleBtn.addEventListener('click', () => {
        const isShown = mobileProfilePanel.classList.toggle('show');
        if (isShown) {
            profileChevron.classList.add('rotate-180');
        } else {
            profileChevron.classList.remove('rotate-180');
        }
    });
}
if (desktopLogoutBtn) {
    desktopLogoutBtn.addEventListener('click', window.logout);
}


// =================================================================
// 4. AUTH STATE MANAGEMENT (The App Entry Point)
// =================================================================

auth.onAuthStateChanged(user => {
    if (user) {
        console.log("User logged in. Initializing app.");
        
        updateUI(user);
        
        // Load birthday data for UI only.
        loadBirthdayData();

        // The scheduler function is removed here. The server handles it.
    } else {
        // Redirect to login page if no user is signed in
     window.location.replace('index.html');
        console.log("No user signed in. Displaying placeholder UI.");
    }
});
</script>
    
<script>
document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('theme-toggle-btn');
    const icon = document.getElementById('theme-icon');
    
    // 1. Load saved theme immediately on page load
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    icon.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';

    // 2. Click Event
    btn.addEventListener('click', () => {
        let currentTheme = document.documentElement.getAttribute('data-theme');
        let newTheme = currentTheme === 'dark' ? 'light' : 'dark';

        // Apply new theme
        document.documentElement.setAttribute('data-theme', newTheme);
        
        // Save to LocalStorage (works across all pages on your site)
        localStorage.setItem('theme', newTheme);
        
        // Update Icon
        icon.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    });
});
</script>
     <button id="theme-toggle-btn">
    <span id="theme-icon">üåô</span>
</button>
<style>
    /* --- 1. THEME VARIABLE DEFINITIONS --- */
    :root {
        --bg-body: #f9fafb;
        --bg-card: #ffffff;
        --text-main: #1f2937;   /* Deep Gray 800 */
        --text-bold: #000000;   /* Pure Black */
        --border: #e5e7eb;
        
        /* BOTTOM NAV COLORS (LIGHT) */
        --nav-bg: #ffffff;
        --nav-text: #000000;    /* Pure Black for text and icons */
        --nav-height: 65px;
    }

    [data-theme="dark"] {
        --bg-body: #0f172a;     /* Deep Navy/Black */
        --bg-card: #1e293b;     /* Slate 800 */
        --text-main: #cbd5e1;   /* Slate 300 */
        --text-bold: #f8fafc;   /* Slate 50 */
        --border: #334155;      /* Slate 700 */
        
        /* BOTTOM NAV COLORS (DARK) */
        --nav-bg: #0f172a;
        --nav-text: #ffffff;    /* Pure White */
    }

    /* --- 2. GLOBAL OVERRIDES --- */
    body { background-color: var(--bg-body) !important; color: var(--text-main) !important; transition: background 0.3s; }
    
    /* Ensure all text classes inside containers adapt */
    h1, h2, h3, h4, .font-bold, .font-semibold, 
    .text-gray-900, .text-gray-800, .text-blue-800, .text-green-800, .text-yellow-800 { 
        color: var(--text-bold) !important; 
    }

    p, li, span, .text-gray-700, .text-gray-600 { 
        color: var(--text-main) !important; 
    }

    /* Component Surfaces */
    .bg-white, header, aside, main, #mobile-menu, footer {
        background-color: var(--bg-card) !important;
        border-color: var(--border) !important;
    }

    /* --- 3. SIDEBAR & CORE FEATURES FIXES --- */
    [data-theme="dark"] .sidebar-desktop, [data-theme="dark"] aside {
        background-color: var(--bg-card) !important;
    }
    
    /* Muted Sidebar links in dark mode */
    [data-theme="dark"] .sidebar-nav-internal a { color: #94a3b8 !important; }
    [data-theme="dark"] .sidebar-nav-internal a:hover,
    [data-theme="dark"] .sidebar-nav-internal a.active {
        background-color: #334155 !important;
        color: #60a5fa !important;
    }

    /* Core Features Overview Boxes */
    [data-theme="dark"] .bg-gray-100, 
    [data-theme="dark"] .bg-yellow-50,
    [data-theme="dark"] .bg-blue-50,
    [data-theme="dark"] .bg-green-50 {
        background-color: #334155 !important;
        border-color: var(--border) !important;
    }

    /* Brighter borders for boxes in dark mode */
    [data-theme="dark"] .border-l-4, [data-theme="dark"] .border-t-4 {
        border-color: #4f46e5 !important; 
    }

    /* --- 4. BOTTOM NAV (DARKER FONTS & ICONS) --- */
    #universal-bottom-nav {
        background-color: var(--nav-bg) !important;
        border-top: 1px solid var(--border) !important;
        height: var(--nav-height);
    }

    /* This targets the icon specifically */
    .nav-link i { 
        color: var(--nav-text) !important; 
        font-weight: 900 !important; /* Makes icons look thicker/bolder */
        font-size: 20px !important;  /* Slightly larger for visibility */
        transition: transform 0.2s;
    }

    /* This targets the text label specifically */
    .nav-link div { 
        color: var(--nav-text) !important; 
        font-weight: 900 !important; /* Thickest weight for labels */
        font-size: 11px !important;
        margin-top: 2px;
    }

    /* --- 5. THEME TOGGLE (50px ABOVE NAV) --- */
    #theme-toggle-btn {
        position: fixed;
        bottom: 115px; /* 65px height + 50px gap */
        right: 20px;
        z-index: 10000;
        width: 52px;
        height: 52px;
        border-radius: 50%;
        border: none;
        background: #4f46e5;
        color: white;
        cursor: pointer;
        box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }

    #theme-toggle-btn:active { transform: scale(0.9); }
</style>
</body>
</html>













