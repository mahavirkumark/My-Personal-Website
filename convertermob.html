<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savig</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.5); }
        select { cursor: pointer; }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #f8fafc; 
            color: #000000;
        }
        .glass { 
            background: rgba(255, 255, 255, 0.9); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(0, 0, 0, 0.05); 
        }
        
        /* Smooth Text Animation */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-result { animation: fadeInUp 0.4s ease-out forwards; }

        /* Modern Black Text Shimmer for Titles */
        .shimmer-text {
            background: linear-gradient(90deg, #000, #4b5563, #000);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: shine 3s linear infinite;
        }
        @keyframes shine {
            to { background-position: 200% center; }
        }

        select { cursor: pointer; appearance: none; }
    </style>

</head>
<body class="p-4 md:p-12 min-h-screen">

    <div class="max-w-5xl mx-auto">
        <header class="mb-5 text-center md:text-left">
      
            <p class="text-black-700 text-xl  font-medium">Global Currency Audit & Real-time Exchange</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-5 gap-3">
            <div class="lg:col-span-5">
                <div class="glass rounded-[1rem] p-4 shadow-xl shadow-slate-200 border-none">
                    <div class="space-y-6">
                        <div>
                            <label class="block text-[14px] font-bold text-black-400 uppercase tracking-widest mb-2">Input Amount</label>
                            <input type="number" id="amount" value="1" step="0.01" class="w-full p-3 bg-slate-50 border-2 border-transparent focus:border-indigo-500 rounded-xl text-xl font-bold outline-none transition-all shadow-inner">
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-[10px] font-bold text-black-400 uppercase tracking-widest mb-2">Source Country</label>
                                <select id="from-country" class="w-full p-3 bg-white border border-slate-200 rounded-2xl font-semibold shadow-sm focus:ring-2 focus:ring-indigo-100 outline-none"></select>
                            </div>

                            <div class="flex justify-center -my-2 relative z-10">
                                <button id="swap-btn" class="bg-indigo-600 text-black p-3 rounded-full shadow-lg hover:scale-110 transition-transform">
                                    <i class="fas fa-retweet"></i>
                                </button>
                            </div>

                            <div>
                                <label class="block text-[14px] font-bold text-black-400 uppercase tracking-widest mb-2">Target Country</label>
                                <select id="to-country" class="w-full p-2 bg-white border border-slate-200 rounded-2xl font-semibold shadow-sm focus:ring-2 focus:ring-indigo-100 outline-none"></select>
                            </div>
                        </div>

                        <div class="pt-1 border-t border-slate-100">
                            <div class="flex justify-between items-end">
                                <div>
                                    <p class="font-bold block text-[14px] uppercase mb-1">Exchange Value</p>
                                    <h2 id="result-display" class="text-lg font-black text-indigo-700">--</h2>
                                </div>
                                <div class="text-right">
                                    <p id="rate-info" class="text-[10px] font-bold text-slate-400 uppercase tracking-tighter">1 INR = -- USD</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            
                </div>
            </div>
        </div>
    </div>
<nav id="universal-bottom-nav">
   <a href="homemob.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fa-solid fa-house transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold text-xm">Home</div>
    </a>

    <a href="addressmob.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fa-solid fa-location-dot transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Address</div>
    </a>

    <a href="passwordmob.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fa-solid fa-key transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Password</div>
    </a>

    <a href="contact.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fa-solid fa-envelope transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Contact</div>
    </a>
          <a href="cr.html" class="nav-link group flex flex-col items-center transition-all duration-300 hover:scale-110 active:scale-90">
        <i class="fas fa-calendar-alt transition-colors duration-300 group-hover:text-indigo-600"></i>
        <div class="transition-all duration-300 group-hover:text-indigo-600 group-hover:font-bold">Calender</div>
    </a>
    </nav>


<style>
/* 1. Theme Variables & Reset */
:root {
    --bg-color: #ffffff;
    --nav-bg: rgba(255, 255, 255, 0.95); 
    --nav-text: #000000; /* Pure black for light mode */
    --hover-bg: #f8fafc;
    --active-color: #2563eb;
    --border-color: rgba(0, 0, 0, 0.1);
    --nav-height: 70px;
}

[data-theme='dark'] {
    --bg-color: #0f172a;
    --nav-bg: rgba(15, 23, 42, 0.98);
    --nav-text: #ffffff; /* FIXED: Changed from black to white for readability */
    --hover-bg: #1e293b;
    --active-color: #60a5fa;
    --border-color: rgba(255, 255, 255, 0.1);
}

/* 2. Universal Bottom Nav Entrance Animation */
#universal-bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 60px;
    background-color: var(--nav-bg);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    display: flex;
    justify-content: space-around;
    align-items: center;
    border-top: 1px solid var(--border-color);
    box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.1);
    z-index: 999999;
    padding-bottom: env(safe-area-inset-bottom);
    animation: navSlideUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    font-size: 14px;
}

@keyframes navSlideUp {
    from { transform: translateY(100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* 3. Bottom Nav Link Styling */
.nav-link {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--nav-text) !important; 
    text-decoration: none !important;
    transition: color 0.3s ease;
    position: relative;
    height: 40px;
}

.nav-link i {
    font-size: 25px;
    margin-bottom: 4px;
    color: inherit;
    /* Cleaned up stroke for better legibility */
    -webkit-text-stroke: 0.5px var(--nav-text); 
    font-weight: 700;
}

.nav-link div {
    font-size: 11px;
    font-weight: 800; /* 900 can be too chunky on some screens */
    text-transform: uppercase;
    color: inherit;
    letter-spacing: 0.02em;
    gap: 5px;
}

.nav-link.active {
    color: var(--active-color) !important;
}

.nav-link.active i {
    transform: translateY(-3px);
    -webkit-text-stroke: 0.5px var(--active-color);
}


[data-theme='dark'] .box-container:not(.bg-\[\#ffe11b\]) {
    background: #1e293b;
    color: #ffffff; /* Ensures text is visible in dark mode */
}

.animate-pop {
    animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    opacity: 0;
}

@keyframes popIn {
    0% { transform: scale(0.6); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}


.theme-toggle:hover {
    transform: translateY(-2px);
    background: var(--hover-bg);
}








[data-theme='dark'] .profile-box { 
    background: #1e293b; 
}

/* --- Adjustments for the Top Header Area --- */


/* Ensure icons in the toggle switch between moon/sun */
[data-theme='dark'] .theme-toggle .fa-sun { display: block; }
[data-theme='dark'] .theme-toggle .fa-moon { display: none; }
[data-theme='light'] .theme-toggle .fa-sun { display: none; }
[data-theme='light'] .theme-toggle .fa-moon { display: block; }

/* Logic to show moon/sun icons depending on theme (Compatibility Fallback) */
[data-theme='dark'] .theme-toggle i.fa-sun {
    display: inline-block;
}
[data-theme='light'] .theme-toggle i.fa-moon {
    display: inline-block;
}



/* 1. Reset Body and Layout Logic */

/* 3. Fix the Grid Columns for Mobile */


/* 4. Positioning the Profile Box back to the top right */


/* 5. Data Visibility and Contrast */

/* Keeps the text readable on the yellow background specifically */

/* If you want ONLY the Savig text to stay dark because the box is yellow */
[data-theme='dark'] .box-container.bg-\[\#ffe11b\] span {
    color: #000000 !important;
}
/* 6. Theme Toggle Logic (Icon Display) */
[data-theme='dark'] .theme-toggle .fa-sun { display: block !important; }
[data-theme='dark'] .theme-toggle .fa-moon { display: none !important; }
[data-theme='light'] .theme-toggle .fa-sun { display: none !important; }
[data-theme='light'] .theme-toggle .fa-moon { display: block !important; }
.universal-bottom-nav:hover{
    color: #2563eb;
}
</style>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, limit, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
         apiKey: "AIzaSyB78RTVCg0cmSPp7A1RJyyAgBuCeolO0cc",
        authDomain: "sk12-58e9e.firebaseapp.com",
        databaseURL: "https://sk12-58e9e-default-rtdb.firebaseio.com",
        projectId: "sk12-58e9e",
        storageBucket: "sk12-58e9e.appspot.com",
        messagingSenderId: "470207874652",
        appId: "1:470207874652:web:67ba1cf3629b7e5b144899"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const fromSelect = document.getElementById('from-country');
        const toSelect = document.getElementById('to-country');
        const amountInput = document.getElementById('amount');
        const resultText = document.getElementById('result-display');
        const rateText = document.getElementById('rate-info');

        // 1. Fetch Country/Currency Data
        async function init() {
            try {
                // Fetch list of all countries and their currencies
                const res = await fetch("https://restcountries.com/v3.1/all?fields=name,currencies,cca2");
                const countries = await res.json();
                
                // Sort alphabetically
                countries.sort((a, b) => a.name.common.localeCompare(b.name.common));

                let options = "";
                countries.forEach(c => {
                    if (c.currencies) {
                        const code = Object.keys(c.currencies)[0];
                        options += `<option value="${code}">${c.name.common} (${code})</option>`;
                    }
                });

                fromSelect.innerHTML = options;
                toSelect.innerHTML = options;

                // Set Default: India as main
                fromSelect.value = "INR";
                toSelect.value = "USD";

                autoConvert(); // First load
            } catch (e) { console.error("Data Load Error", e); }
        }

        // 2. Auto-Convert Engine
        async function autoConvert() {
            const amount = amountInput.value || 0;
            const from = fromSelect.value;
            const to = toSelect.value;

            try {
                const res = await fetch(`https://open.er-api.com/v6/latest/${from}`);
                const data = await res.json();
                const rate = data.rates[to];
                const final = (amount * rate).toLocaleString(undefined, { minimumFractionDigits: 2 });

                resultText.innerText = `${final} ${to}`;
                rateText.innerText = `1 ${from} = ${rate.toFixed(4)} ${to}`;

                // Save to Firebase for record keeping
                await addDoc(collection(db, "savig_conversions"), {
                    amount, from, to, result: final, timestamp: serverTimestamp()
                });
            } catch (err) { console.error("Conversion Error", err); }
        }

        // Event Listeners for "Auto" behavior
        [amountInput, fromSelect, toSelect].forEach(el => {
            el.addEventListener('input', autoConvert);
        });

        // Swap button
        document.getElementById('swap-btn').addEventListener('click', () => {
            const temp = fromSelect.value;
            fromSelect.value = toSelect.value;
            toSelect.value = temp;
            autoConvert();
        });

        // 3. Real-time Audit Log
        onSnapshot(query(collection(db, "savig_conversions"), orderBy("timestamp", "desc"), limit(7)), (snap) => {
            const list = document.getElementById('history-list');
            list.innerHTML = '';
            snap.forEach(doc => {
                const d = doc.data();
                const card = document.createElement('div');
                card.className = "flex justify-between items-center p-2 bg-slate-50 rounded-xl border border-slate-100 hover:bg-white hover:shadow-md transition-all";
                card.innerHTML = `
                    <div class="flex items-center gap-3">
                        <div class="bg-indigo-100 text-indigo-700 w-5 h-5 rounded-lg flex items-center justify-center text-[10px] font-bold">${d.from}</div>
                        <p class="text-sm font-bold text-slate-700">${d.amount} â†’ <span class="text-indigo-600">${d.result} ${d.to}</span></p>
                    </div>
                `;
                list.appendChild(card);
            });
        });

        init();
    </script>
</body>
</html>
